<!doctype html>



  


<html class="theme-next pisces use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  
    
      
    

    
  

  

  
    
      
    

    
  

  
    
      
    

    
  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Monda:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic|Lobster Two:300,300italic,400,400italic,700,700italic|PT Mono:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description" content="你陪着我的时候，我从没有羡慕任何人。">
<meta property="og:type" content="website">
<meta property="og:title" content="chesian">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="chesian">
<meta property="og:description" content="你陪着我的时候，我从没有羡慕任何人。">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="chesian">
<meta name="twitter:description" content="你陪着我的时候，我从没有羡慕任何人。">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: '博主'
    }
  };
</script>

  <title> chesian </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  



  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?e3bc6c75aa4aaaa95ce188f16a662898";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>








  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">chesian</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle"></p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="#" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup">
 <span class="search-icon fa fa-search"></span>
 <input type="text" id="local-search-input">
 <div id="local-search-result"></div>
 <span class="popup-btn-close">close</span>
</div>


    </div>
  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/01/03/centos-built-develope-envs/" itemprop="url">
                  centos 开发环境搭建
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-01-03T20:13:55+08:00" content="2017 年 01 月 03 日">
              2017 年 01 月 03 日
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2017/01/03/centos-built-develope-envs/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/01/03/centos-built-develope-envs/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2017/01/03/centos-built-develope-envs/" class="leancloud_visitors" data-flag-title="centos 开发环境搭建">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="centos-开发环境搭建"><a href="#centos-开发环境搭建" class="headerlink" title="centos 开发环境搭建"></a>centos 开发环境搭建</h3><pre><code># mkdir chen
# cd chen
# mkdir softwares
# mkdir tools
# mkdir workspace
# cd tools
# tar -xzvf ../tools/apache-tomcat-8.0.26.tar.gz
# tar -xzvf ../tools/jdk-8u91-linux-x64.gz

# vim /etc/profile
# export JAVA_HOME=/home/chen/softwares/jdk1.8.0_91
# export PATH=$JAVA_HOME/bin:$PATH
# source /etc/profile
</code></pre>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/12/23/centos-env/" itemprop="url">
                  centos 查看和修改PATH环境变量的方法
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-12-23T20:07:01+08:00" content="2016 年 12 月 23 日">
              2016 年 12 月 23 日
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/12/23/centos-env/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/12/23/centos-env/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2016/12/23/centos-env/" class="leancloud_visitors" data-flag-title="centos 查看和修改PATH环境变量的方法">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="centos-查看和修改PATH环境变量的方法"><a href="#centos-查看和修改PATH环境变量的方法" class="headerlink" title="centos 查看和修改PATH环境变量的方法"></a>centos 查看和修改PATH环境变量的方法</h3><p>查看PATH：</p>
<pre><code># echo $PATH
</code></pre><p>以添加mongodb server为列</p>
<h4 id="修改方法一："><a href="#修改方法一：" class="headerlink" title="修改方法一："></a>修改方法一：</h4><pre><code># export PATH=/usr/local/mongodb/bin:$PATH
</code></pre><p>//配置完后可以通过echo $PATH查看配置结果。<br>生效方法：立即生效<br>有效期限：临时改变，只能在当前的终端窗口中有效，当前窗口关闭后就会恢复原有的path配置<br>用户局限：仅对当前用户</p>
<h4 id="修改方法二："><a href="#修改方法二：" class="headerlink" title="修改方法二："></a>修改方法二：</h4><p>通过修改.bashrc文件:</p>
<pre><code># vim ~/.bashrc 
</code></pre><p>//在最后一行添上：</p>
<pre><code># export PATH=/usr/local/mongodb/bin:$PATH
</code></pre><p>生效方法：（有以下两种）<br>1、关闭当前终端窗口，重新打开一个新终端窗口就能生效<br>2、输入“source ~/.bashrc”命令，立即生效<br>有效期限：永久有效<br>用户局限：仅对当前用户</p>
<h4 id="修改方法三"><a href="#修改方法三" class="headerlink" title="修改方法三:"></a>修改方法三:</h4><p>通过修改profile文件:</p>
<pre><code># vim /etc/profile

# /export PATH //找到设置PATH的行，添加

# export PATH=/usr/local/mongodb/bin:$PATH
</code></pre><p>生效方法：系统重启<br>有效期限：永久有效<br>用户局限：对所有用户</p>
<h4 id="修改方法四"><a href="#修改方法四" class="headerlink" title="修改方法四:"></a>修改方法四:</h4><p>通过修改environment文件:</p>
<pre><code># vim /etc/environment
</code></pre><p>在PATH=”/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games”中加入“:/usr/local/mongodb/bin”</p>
<p>生效方法：系统重启<br>有效期限：永久有效<br>用户局限：对所有用户</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/11/22/Neural-Networks-and-Deep-Learning/" itemprop="url">
                  Neural-Networks-and-Deep-Learning 站点资源
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-11-22T23:37:43+08:00" content="2016 年 11 月 22 日">
              2016 年 11 月 22 日
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Deep-Learning/" itemprop="url" rel="index">
                    <span itemprop="name">Deep-Learning</span>
                  </a>
                </span>

                
                
                  ， 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Deep-Learning/Neural-Network/" itemprop="url" rel="index">
                    <span itemprop="name">Neural-Network</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/11/22/Neural-Networks-and-Deep-Learning/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/11/22/Neural-Networks-and-Deep-Learning/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2016/11/22/Neural-Networks-and-Deep-Learning/" class="leancloud_visitors" data-flag-title="Neural-Networks-and-Deep-Learning 站点资源">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><a href="http://neuralnetworksanddeeplearning.com/" target="_blank" rel="external">http://neuralnetworksanddeeplearning.com/</a></p>
<p>关于作者<br><a href="http://michaelnielsen.org/" target="_blank" rel="external">http://michaelnielsen.org/</a></p>
<p>Reference</p>
<p><a href="http://en.wikipedia.org/wiki/Frank_Rosenblatt" target="_blank" rel="external">http://en.wikipedia.org/wiki/Frank_Rosenblatt</a><br>感知器在 20 世纪五、六⼗年代由科学家 Frank Rosenblatt 发明，其受到 Warren McCulloch 和 Walter Pitts 早期的⼯作的影响。</p>
<p><a href="http://en.wikipedia.org/wiki/Recurrent_neural_network" target="_blank" rel="external">http://en.wikipedia.org/wiki/Recurrent_neural_network</a></p>
<p><a href="http://yann.lecun.com/exdb/mnist/" target="_blank" rel="external">http://yann.lecun.com/exdb/mnist/</a><br> MNIST 数据集</p>
<p><a href="http://mathoverflow.net/questions/25983/intuitive-crutches-for-higher-dimensional-thinking" target="_blank" rel="external">http://mathoverflow.net/questions/25983/intuitive-crutches-for-higher-dimensional-thinking</a><br>专业的数学家如何思考⾼维空间的讨论</p>
<p><a href="http://numpy.org/" target="_blank" rel="external">http://numpy.org/</a><br> Numpy 的 Python 库，⽤来做快速线性代数</p>
<p><a href="http://www.deeplearning.net/tutorial/gettingstarted.html" target="_blank" rel="external">http://www.deeplearning.net/tutorial/gettingstarted.html</a><br>MNIST 数据集的特殊格式的数据</p>
<p><a href="http://scikit-learn.org/stable/" target="_blank" rel="external">http://scikit-learn.org/stable/</a><br><a href="http://www.csie.ntu.edu.tw/~cjlin/libsvm/" target="_blank" rel="external">http://www.csie.ntu.edu.tw/~cjlin/libsvm/</a><br><a href="https://github.com/mnielsen/neural-networks-and-deep-learning/blob/master/src/mnist_svm.py" target="_blank" rel="external">https://github.com/mnielsen/neural-networks-and-deep-learning/blob/master/src/mnist_svm.py</a><br>使⽤ scikit-learn Python 程序库，它提供了⼀个简单的 Python 接⼝，包装了⼀个⽤于 SVM 的快速的，称为 LIBSVM 的 C 库。</p>
<p><a href="http://peekaboo-vision.blogspot.ca/" target="_blank" rel="external">http://peekaboo-vision.blogspot.ca/</a><br><a href="http://peekaboo-vision.blogspot.de/2010/09/mnist-for-ever.html" target="_blank" rel="external">http://peekaboo-vision.blogspot.de/2010/09/mnist-for-ever.html</a><br> Andreas Mueller 的博客。Mueller 展⽰了通过⼀些优化SVM 参数的⼯作</p>
<p><a href="http://www.matthewzeiler.com/pubs/icml2013/icml2013.pdf" target="_blank" rel="external">http://www.matthewzeiler.com/pubs/icml2013/icml2013.pdf</a><br>Regularization of Neural Networks using DropConnect</p>
<p><a href="http://www.nature.com/nature/journal/v323/n6088/pdf/323533a0.pdf" target="_blank" rel="external">http://www.nature.com/nature/journal/v323/n6088/pdf/323533a0.pdf</a><br>反向传播算法最初在 1970 年代被提及，但是⼈们直到 David Rumelhart、Geoffrey Hinton 和Ronald Williams 的著名的 1986 年的论⽂中才认识到这个算法的重要性。</p>
<p>二元熵。 链式法则<br><a href="http://en.wikipedia.org/wiki/Binary_entropy_function" target="_blank" rel="external">http://en.wikipedia.org/wiki/Binary_entropy_function</a></p>
<p><a href="https://github.com/mnielsen/neural-networks-and-deep-learning/blob/master/src/network2.py" target="_blank" rel="external">https://github.com/mnielsen/neural-networks-and-deep-learning/blob/master/src/network2.py</a><br>使⽤交叉熵来对 MNIST 数字进⾏分类</p>
<p><a href="http://books.google.ca/books?id=VWq5GG6ycxMC" target="_blank" rel="external">http://books.google.ca/books?id=VWq5GG6ycxMC</a><br>交叉熵是“不确定性”的一种度量 可以阅读 Cover and Thomas 的第五章涉及 Kraft 不等式的有关信息论的内容。</p>
<p><a href="http://www.nature.com/nature/journal/v427/n6972/full/427297a.html" target="_blank" rel="external">http://www.nature.com/nature/journal/v427/n6972/full/427297a.html</a><br><a href="http://www.johndcook.com/blog/2011/06/21/how-to-fit-an-elephant/" target="_blank" rel="external">http://www.johndcook.com/blog/2011/06/21/how-to-fit-an-elephant/</a><br> 过度拟合   这个引⽤的故事来⾃⼀篇 Freeman Dyson 所写的引⼈⼊胜的⽂章。他是提出这个有瑕疵的模型的⼈之⼀。⼀个关于四个参数模拟⼤象的例⼦可以在这⾥ 找到。</p>
<p><a href="https://www.aip.org/history-programs/niels-bohr-library/oral-histories/5020-4" target="_blank" rel="external">https://www.aip.org/history-programs/niels-bohr-library/oral-histories/5020-4</a><br><a href="http://en.wikipedia.org/wiki/Problem_of_induction" target="_blank" rel="external">http://en.wikipedia.org/wiki/Problem_of_induction</a><br><a href="http://www.gutenberg.org/ebooks/9662" target="_blank" rel="external">http://www.gutenberg.org/ebooks/9662</a><br><a href="http://ieeexplore.ieee.org/xpl/articleDetails.jsp?tp=&amp;arnumber=585893" target="_blank" rel="external">http://ieeexplore.ieee.org/xpl/articleDetails.jsp?tp=&amp;arnumber=585893</a><br> These issues go back to the problem of induction, famously discussed by the Scottish philosopher David Hume in<br>”An Enquiry Concerning Human Understanding” (1748). The problem of induction has been given a modern machinelearning form in the no-free lunch theorem (link) of David Wolpert and William Macready (1997).</p>
<p><a href="http://yann.lecun.com/exdb/publis/pdf/lecun-01a.pdf" target="_blank" rel="external">http://yann.lecun.com/exdb/publis/pdf/lecun-01a.pdf</a><br>梯度下降学习的动态有⼀种⾃规范化的效应。<br>13 In Gradient-Based Learning Applied to Document Recognition, by Yann LeCun, Léon Bottou, Yoshua Bengio, andPatrick Haffner (1998).</p>
<p><a href="https://papers.nips.cc/paper/4824-imagenet-classification-with-deep-convolutional-neural-networks.pdf" target="_blank" rel="external">https://papers.nips.cc/paper/4824-imagenet-classification-with-deep-convolutional-neural-networks.pdf</a><br>14 ImageNetClassificationwithDeepConvolutionalNeuralNetworks,byAlexKrizhevsky,IlyaSutskever,andGeoffrey<br>Hinton (2012).<br>“因为神经元不能依赖其他神经元特定的存在，这个技术其实减少了复杂的互适应的神经元。所以，强制要学习那些在<br>神经元的不同随机⼦集中更加健壮的特征。 ”</p>
<p><a href="http://arxiv.org/pdf/1207.0580.pdf" target="_blank" rel="external">http://arxiv.org/pdf/1207.0580.pdf</a><br>15 Improving neural networks by preventing co-adaptation of feature detectors by Geoffrey Hinton, Nitish Srivastava,Alex Krizhevsky, Ilya Sutskever<br>弃权技术的真正衡量是它已经在提升神经⽹络性能上应⽤得相当成功。原始论⽂ 15 介绍了将其应⽤于很多不同任务的技术。</p>
<p><a href="http://dx.doi.org/10.1109/ICDAR.2003.1227801" target="_blank" rel="external">http://dx.doi.org/10.1109/ICDAR.2003.1227801</a><br>7 Best Practices for Convolutional Neural Networks Applied to Visual Document Analysis, by Patrice Simard, Dave<br>Steinkraus, and John Platt (2003)<br>这⽚论⽂中，作者在 MNIST 上使⽤了⼏个的这种想法的变化⽅式。其中⼀种他们考虑的⽹络结构其实和我们已经使⽤过的类似——⼀个拥有 800 个隐藏元的前馈神经⽹络，使⽤了交叉熵代价函数。</p>
<p><a href="http://scikit-learn.org/stable/" target="_blank" rel="external">http://scikit-learn.org/stable/</a><br>使⽤ scikit-learn 库提供的 SVM 替换神经⽹络</p>
<p><a href="http://dx.doi.org/10.3115/1073012.1073017" target="_blank" rel="external">http://dx.doi.org/10.3115/1073012.1073017</a><br>对“算法 A 是不是要⽐算法 B 好？ ”正确的反应应该是“你在使⽤什么训练集合？ ”<br>显著的例⼦参⻅ Scaling to very very large corpora for natural language disambiguation, by Michele Banko and<br>Eric Brill (2001).</p>
<p><a href="http://arxiv.org/pdf/1206.5533v2.pdf" target="_blank" rel="external">http://arxiv.org/pdf/1206.5533v2.pdf</a><br>权重初始化⽅法  看看在 2012 年的 Yoshua Bengio 的论⽂ 22 的14 和 15 ⻚，以及相关的参考⽂献<br> Practical Recommendations for Gradient-Based Training of Deep Architectures, by Yoshua Bengio (2012)</p>
<p><a href="http://papers.nips.cc/paper/4522-practical-bayesian-optimization-of-machine-learning-algorithms.pdf" target="_blank" rel="external">http://papers.nips.cc/paper/4522-practical-bayesian-optimization-of-machine-learning-algorithms.pdf</a><br><a href="https://github.com/jaberg/hyperopt" target="_blank" rel="external">https://github.com/jaberg/hyperopt</a><br>⽹格搜索的成就和限制（易于实现的变体）在 James Bergstra 和 Yoshua Bengio 2012 年的 论⽂中已经给出了综述。很多更加精细的⽅法也被⼤家提出来了。我这⾥不会给出介绍，但是想指出 2012 年使⽤⻉叶斯观点⾃动优化超参数的论⽂。代码可以获得，也已经被其他的研究⼈员使⽤了。</p>
<p><a href="http://en.wikipedia.org/wiki/Limited-memory_BFGS" target="_blank" rel="external">http://en.wikipedia.org/wiki/Limited-memory_BFGS</a><br>优化代价函数的⽅法：当你越来越深⼊了解神经⽹络时，值得去尝试其他的优化技术，理解他们⼯作的原理，优势劣势，以及在实践中如何应⽤。前⾯我提到的⼀篇论⽂ 25 ，介绍并对⽐了这些技术，包含共轭梯度下降和 BFGS ⽅法（也可以看看 limited memory BFGS，L-BFGS。另⼀种近期效果很不错技术 26 是 Nesterov 的加速梯度技术，这个技术对 momentum 技术进⾏了改进。<br><a href="http://yann.lecun.com/exdb/publis/pdf/lecun-98b.pdf" target="_blank" rel="external">http://yann.lecun.com/exdb/publis/pdf/lecun-98b.pdf</a><br> Efficient BackProp, by Yann LeCun, Léon Bottou, Genevieve Orr and Klaus-Robert Müller (1998).<br><a href="http://www.cs.toronto.edu/~hinton/absps/momentum.pdf" target="_blank" rel="external">http://www.cs.toronto.edu/~hinton/absps/momentum.pdf</a><br>例如， 看看 On the importance of initialization and momentum in deep learning, by Ilya Sutskever, James Martens,<br>George Dahl, and Geoffrey Hinton (2012).</p>
<p><a href="http://www.reddit.com/r/MachineLearning/comments/25lnbt/ama_yann_lecun/chivdv7" target="_blank" rel="external">http://www.reddit.com/r/MachineLearning/comments/25lnbt/ama_yann_lecun/chivdv7</a><br> 你怎么看那些全部由实验效果⽀撑（⽽⾮数学保证）的使⽤和研究机器学习技术呢？同样，在哪些场景中，你已经注意到这些技术失效了？</p>
<p><a href="https://zh.wikipedia.org/wiki/哈恩－巴拿赫定理" target="_blank" rel="external">https://zh.wikipedia.org/wiki/哈恩－巴拿赫定理</a><br><a href="http://www.dartmouth.edu/~gvc/Cybenko_MCSS.pdf" target="_blank" rel="external">http://www.dartmouth.edu/~gvc/Cybenko_MCSS.pdf</a><br><a href="http://www.sciencedirect.com/science/article/pii/0893608089900208" target="_blank" rel="external">http://www.sciencedirect.com/science/article/pii/0893608089900208</a><br>普遍性定理<br>1 Approximation by superpositions of a sigmoidal function, by George Cybenko (1989). The result was very much<br>in the air at the time, and several groups proved closely related results. Cybenko’s paper contains a useful discussionof much of that work. Another important early paper is Multilayer feedforward networks are universal approximators,by Kurt Hornik, Maxwell Stinchcombe, and Halbert White (1989). This paper uses the Stone-Weierstrass theorem toarrive at similar results</p>
<p><a href="http://arxiv.org/pdf/1312.6098.pdf" target="_blank" rel="external">http://arxiv.org/pdf/1312.6098.pdf</a><br><a href="http://www.iro.umontreal.ca/~bengioy/papers/ftml_book.pdf" target="_blank" rel="external">http://www.iro.umontreal.ca/~bengioy/papers/ftml_book.pdf</a><br>正如线路的⽰例中看到的那样，存在着理论上的研究结果告诉我们深度⽹络在本质上⽐浅层⽹络更加强⼤<br>1 对某些问题和⽹络结构，Razvan Pascanu, Guido Montúfar, and Yoshua Bengio 在 2014 年的这篇⽂章 On the<br>number of response regions of deep feed forward networks with piece-wise linear activations 给出了证明。更加详细<br>的讨论在 Yoshua Bengio 2009 年的著作 Learning deep architectures for AI 的第2部分。</p>
<p><a href="https://github.com/mnielsen/neural-networks-and-deep-learning/archive/master.zip" target="_blank" rel="external">https://github.com/mnielsen/neural-networks-and-deep-learning/archive/master.zip</a><br>单⼀隐藏层的神经⽹络⽰例   消失的梯度问题</p>
<p><a href="http://en.wikipedia.org/wiki/Gabor_filter" target="_blank" rel="external">http://en.wikipedia.org/wiki/Gabor_filter</a>      Gabor 滤波器<br><a href="http://arxiv.org/abs/1311.2901" target="_blank" rel="external">http://arxiv.org/abs/1311.2901</a><br>现在有许多关于通过卷积⽹络来更好理解特征的⼯作成果。如果你感兴趣，我建议从 Matthew Zeiler 和 Rob Fergus 的<br>（2013）论⽂ Visualizing and Understanding Convolutional Networks 开始。</p>
<p><a href="http://deeplearning.net/software/theano/" target="_blank" rel="external">http://deeplearning.net/software/theano/</a><br> Theano 的机器学习库</p>
<p><a href="http://aws.amazon.com/ec2/instance-types/" target="_blank" rel="external">http://aws.amazon.com/ec2/instance-types/</a><br> Amazon Web Services EC2 G2 实例类型你手机上的系统没有可用·的 GPU</p>
<p><a href="http://dx.doi.org/10.1109/ICDAR.2003.1227801" target="_blank" rel="external">http://dx.doi.org/10.1109/ICDAR.2003.1227801</a><br> Best Practices for Convolutional Neural Networks Applied to Visual Document Analysis, by Patrice Simard, Dave<br>Steinkraus, and John Platt (2003).<br>在 2003 年，Simard，Steinkraus 和Platt 19 使⽤⼀个神经⽹络改进了他们的 MNIST 性能，达到了 99.6%，这个⽹络以其它⽅式和我们的⾮常相似，使⽤两个卷积–混合层，跟着⼀个具有 100 个神经元的隐藏的全连接层。</p>
<p><a href="http://rodrigob.github.io/are_we_there_yet/build/classification_datasets_results.html" target="_blank" rel="external">http://rodrigob.github.io/are_we_there_yet/build/classification_datasets_results.html</a><br> 仍然有可能在 MNIST 上提⾼性能。Rodrigo Benenson 汇编了⼀份信息汇总⻚⾯，显⽰这⼏年的进展，提供了论⽂的链接。</p>
<p><a href="http://arxiv.org/abs/1003.0358" target="_blank" rel="external">http://arxiv.org/abs/1003.0358</a><br>近期成果的大部分内容、它是⼀篇 Cireșan、Meier、Gambardella、和 Schmidhuber 所著的 2010 年论⽂ 20 。我喜欢这篇论⽂的地⽅是它是如此简单。其中的⽹络是⼀个许多层的神经⽹络，仅使⽤全连接层（没有卷积层）<br>Deep, Big, Simple Neural Nets Excel on Handwritten Digit Recognition, by Dan Claudiu Cireșan, Ueli Meier, Luca<br>Maria Gambardella, and Jürgen Schmidhuber (2010).</p>
<p><a href="http://www.image-net.org/" target="_blank" rel="external">http://www.image-net.org/</a></p>
<p>2012 LRMD 论⽂：让我从⼀篇源⾃斯坦福和⾕歌的研究⼩组的 2012 年论⽂ 22 开始。我把这篇论⽂称为 LRMD，取⾃前四位作者的姓。LRMD 使⽤⼀个神经⽹络来分类 ImageNet 的图像，⼀个⾮常具有挑战性的图像识别问题。</p>
<p><a href="http://www.image-net.org/synset?wnid=n03489162" target="_blank" rel="external">http://www.image-net.org/synset?wnid=n03489162</a><br>明显是⼀个⽐ MNIST 更有挑战性的图像识别任务</p>
<p><a href="http://www.cs.toronto.edu/~fritz/absps/imagenet.pdf" target="_blank" rel="external">http://www.cs.toronto.edu/~fritz/absps/imagenet.pdf</a><br>2012 KSH 论⽂： LRMD 的成果被⼀篇 Krizhevsky, Sutskever 和 Hinton （KSH） 24 的 2012<br>年论⽂追随。KSH 训练和测试⼀个深度卷积神经⽹络，它使⽤ ImageNet 数据的⼀个有限的⼦集<br>24 ImageNet classification with deep convolutional neural networks, by Alex Krizhevsky, Ilya Sutskever, and Geoffrey E. Hinton (2012).</p>
<p><a href="https://code.google.com/p/cuda-convnet/" target="_blank" rel="external">https://code.google.com/p/cuda-convnet/</a><br>Alex Krizhevsky 的 cuda-convnet（和接替版本） ，它包含有实现这许多思想的<br>代码。⼀个基于 Theano 的实现 26 ，代码可以在这⾥得到。</p>
<p><a href="http://caffe.berkeleyvision.org/model_zoo.html" target="_blank" rel="external">http://caffe.berkeleyvision.org/model_zoo.html</a><br>Caffe 神经⽹络框架也包含⼀个 KSH ⽹络的版本，详细参⻅ Model Zoo。<br>、<br>、<a href="http://karpathy.github.io/2014/09/02/what-i-learned-from-competing-against-a-convnet-on-imagenet/" target="_blank" rel="external">http://karpathy.github.io/2014/09/02/what-i-learned-from-competing-against-a-convnet-on-imagenet/</a><br>为了做这件事，他们构建了⼀个系统让⼈类对 ILSVRC 图像进⾏分类。其作者之⼀ Andrej Karpathy 在⼀篇博<br>⽂中解释道，</p>
<p><a href="http://arxiv.org/abs/1412.2302" target="_blank" rel="external">http://arxiv.org/abs/1412.2302</a><br>26 Theano-based large-scale visual recognition with multiple GPUs, by Weiguang Ding, Ruoyan Wang, Fei Mao, andGraham Taylor (2014).</p>
<p><a href="http://arxiv.org/abs/1409.4842" target="_blank" rel="external">http://arxiv.org/abs/1409.4842</a><br>27 Going deeper with convolutions, by Christian Szegedy, Wei Liu, Yangqing Jia, Pierre Sermanet, Scott Reed,<br>Dragomir Anguelov, Dumitru Erhan, Vincent Vanhoucke, and Andrew Rabinovich (2014).</p>
<p><a href="http://arxiv.org/abs/1409.0575" target="_blank" rel="external">http://arxiv.org/abs/1409.0575</a><br>28 ImageNet large scale visual recognition challenge, by Olga Russakovsky, Jia Deng, Hao Su, Jonathan Krause,<br>Sanjeev Satheesh, Sean Ma, Zhiheng Huang, Andrej Karpathy, Aditya Khosla, Michael Bernstein, Alexander C. Berg,and Li Fei-Fei (2014).</p>
<p><a href="http://arxiv.org/abs/1410.4615" target="_blank" rel="external">http://arxiv.org/abs/1410.4615</a><br>RNN 被⽤来将传统的算法思想，⽐如说 Turing 机或者编程语⾔，和神经⽹络进⾏联系上。这<br>篇 2014 年的论⽂提出了⼀种 RNN 可以以 python 程序的字符级表达作为输⼊，⽤这个表达来预<br>测输出。简单说，⽹络通过学习来理解某些 python 的程序</p>
<p><a href="http://arxiv.org/abs/1410.5401" target="_blank" rel="external">http://arxiv.org/abs/1410.5401</a><br>第⼆篇论⽂同样是 2014 年的，使<br>⽤ RNN 来设计⼀种称之为“神经 Turing 机”的模型。这是⼀种通⽤机器整个结构可以使⽤梯度<br>下降来训练。作者训练 NTM 来推断对⼀些简单问题的算法，⽐如说排序和复制</p>
<p><a href="http://research.google.com/pubs/VincentVanhoucke.html" target="_blank" rel="external">http://research.google.com/pubs/VincentVanhoucke.html</a><br>一个基于深度⽹络的系统已经⽤在了 Google 的 Android 操作系统中（详⻅ Vincent<br>Vanhoucke 的 2012-2015 论⽂） 。</p>
<p><a href="http://dx.doi.org/10.1162/neco.1997.9.8.1735" target="_blank" rel="external">http://dx.doi.org/10.1162/neco.1997.9.8.1735</a><br>一个称为长短期记忆（long short-term memory）的单元进⼊ RNN 中。LSTM 最早是由<br>Hochreiter和Schmidhuber在1997年提出， 就是为了解决这个不稳定梯度的问题。 LSTM让RNN<br>训练变得相当简单， 很多近期的论⽂ （包括我在上⾯给出的那些） 都是⽤了LSTM或者相关的想法</p>
<p><a href="http://www.cs.toronto.edu/~hinton/absps/fastnc.pdf" target="_blank" rel="external">http://www.cs.toronto.edu/~hinton/absps/fastnc.pdf</a><br><a href="http://www.sciencemag.org/content/313/5786/504.short" target="_blank" rel="external">http://www.sciencemag.org/content/313/5786/504.short</a><br>深度信念⽹络，生成式模型和 Boltzmann 机：<br> 参⻅ Geoffrey Hinton, Simon Osindero 和 Yee-Whye Teh 在 2006 年的 A fast learning algorithm for deep belief<br>nets, 及 Geoffrey H</p>
<p><a href="http://www.scholarpedia.org/article/Deep_belief_networks" target="_blank" rel="external">http://www.scholarpedia.org/article/Deep_belief_networks</a><br>DBN 综述</p>
<p><a href="http://www.cs.toronto.edu/~hinton/absps/guideTR.pdf" target="_blank" rel="external">http://www.cs.toronto.edu/~hinton/absps/guideTR.pdf</a><br>包含了很多关于 DBN核⼼组件的受限 Boltzmann 机的有价值的信息。</p>
<p>热⻔的领域包含使⽤神经⽹络来做<br><a href="http://machinelearning.org/archive/icml2008/papers/391.pdf" target="_blank" rel="external">http://machinelearning.org/archive/icml2008/papers/391.pdf</a><br>自然语言处理 natural languageprocessing(see also this informative review paper)、<br><a href="http://papers.nips.cc/paper/5346-information-based-learning-by-agents-in-unbounded-state-spaces" target="_blank" rel="external">http://papers.nips.cc/paper/5346-information-based-learning-by-agents-in-unbounded-state-spaces</a><br>机器翻译 machine translation，<br><a href="http://yann.lecun.com/exdb/publis/pdf/humphrey-jiis-13.pdf" target="_blank" rel="external">http://yann.lecun.com/exdb/publis/pdf/humphrey-jiis-13.pdf</a><br>音乐信息学 music informatics。</p>
<p><a href="http://www.cs.toronto.edu/~vmnih/docs/dqn.pdf" target="_blank" rel="external">http://www.cs.toronto.edu/~vmnih/docs/dqn.pdf</a><br>强化学习的技术来学习玩电⼦游戏 play video games well</p>
<p><a href="http://en.wikipedia.org/wiki/Conway%27s_law" target="_blank" rel="external">http://en.wikipedia.org/wiki/Conway%27s_law</a>   Conway 法则</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/10/23/windows-intall-mysql5-7/" itemprop="url">
                  Windows 安装最新版 Mysql5.7
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-10-23T21:02:41+08:00" content="2016 年 10 月 23 日">
              2016 年 10 月 23 日
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/10/23/windows-intall-mysql5-7/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/10/23/windows-intall-mysql5-7/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2016/10/23/windows-intall-mysql5-7/" class="leancloud_visitors" data-flag-title="Windows 安装最新版 Mysql5.7">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="Windows-安装最新版-Mysql5-7"><a href="#Windows-安装最新版-Mysql5-7" class="headerlink" title="Windows 安装最新版 Mysql5.7"></a>Windows 安装最新版 Mysql5.7</h3><h4 id="Step-1-下载mysql"><a href="#Step-1-下载mysql" class="headerlink" title="Step 1: 下载mysql"></a>Step 1: 下载mysql</h4><p>下载安装程序包，可到MySQL官方网站<a href="http://dev.mysql.com/downloads/下载，选择MySQL" target="_blank" rel="external">http://dev.mysql.com/downloads/下载，选择MySQL</a> Community Server下载 如图</p>
<p> <img src="http://ww1.sinaimg.cn/large/005LZfaWgy1fd0pinju1tj30an068ab1" alt="image"></p>
<p>选择相对应的位数，我这里是64-bit的，然后单击右边的download, 同时登录，但下方有免登录下载链接，点击下载。</p>
<h4 id="Step-2-解压文件夹"><a href="#Step-2-解压文件夹" class="headerlink" title="Step 2: 解压文件夹"></a>Step 2: 解压文件夹</h4><p>我这里是解压到C:\workspace, 你可以解压到任何地方。设置环境变量，将mysql的安装路径添加到path下<br> <img src="http://ww1.sinaimg.cn/large/005LZfaWgy1fd0pinrehtj30au07s401" alt="image"></p>
<h4 id="Step-3-data文件夹"><a href="#Step-3-data文件夹" class="headerlink" title="Step 3: data文件夹"></a>Step 3: data文件夹</h4><p>因为mysql5.7 以后的版本解压后没有data文件夹, 需要自己设定。有两种方法<br>1、把mysql5.6 以前的版本解压后的data目录复制到 mysql5.7 的安装路径下，这样做的比较麻烦，如果没有mysql5.6的版本，还要重新下载。<br>2、通过命令行来初始化 data 目录， 在 cmd 命令行下输入</p>
<pre><code>mysqld --initialize-insecure
</code></pre><p>Step 4: mysql服务<br>把mysql 添加到windows 系统服务中<br>1、用管理员身份打开cmd 命令行，在 cmd 命令行下输入mysqld install mysql,<br>2、通过命令行 启动mysql 服务 输入 net start mysql.</p>
<h4 id="Step-5-启动mysql"><a href="#Step-5-启动mysql" class="headerlink" title="Step 5:  启动mysql"></a>Step 5:  启动mysql</h4><p>在 cmd 命令行下输入 mysql -u root, 初始密码为空，直接按Enter回车，进入mysql命令</p>
<p><img src="http://ww1.sinaimg.cn/large/005LZfaWgy1fd0pinpdcrj30e309t40q" alt="image"></p>
<h4 id="PS-我的安装过程"><a href="#PS-我的安装过程" class="headerlink" title="PS:我的安装过程"></a>PS:我的安装过程</h4><h5 id="1、解压后直接-启动mysql"><a href="#1、解压后直接-启动mysql" class="headerlink" title="1、解压后直接 启动mysql."></a>1、解压后直接 启动mysql.</h5><p>C:\workspace\mysql-5.7.15-winx64\bin&gt;mysql -u root<br>ERROR 2003 (HY000): Can’t connect to MySQL server on ‘localhost’ (10061)</p>
<p>原因 ：mysql 服务未启动</p>
<h5 id="2、安装mysql-服务到window系统服务"><a href="#2、安装mysql-服务到window系统服务" class="headerlink" title="2、安装mysql 服务到window系统服务"></a>2、安装mysql 服务到window系统服务</h5><p>C:\workspace\mysql-5.7.15-winx64\bin&gt;mysqld install mysql<br>Install/Remove of the Service Denied!</p>
<h5 id="3、启动mysql-服务"><a href="#3、启动mysql-服务" class="headerlink" title="3、启动mysql 服务"></a>3、启动mysql 服务</h5><p>C:\Users\chen&gt;net start mysql<br>发生系统错误 5。<br>拒绝访问。</p>
<p>2、3原因 ：权限不够，要切换在windows管理员的权限下 输入命令</p>
<h5 id="4、C-Users-chen-gt-net-start-mysql"><a href="#4、C-Users-chen-gt-net-start-mysql" class="headerlink" title="4、C:\Users\chen&gt;net start mysql"></a>4、C:\Users\chen&gt;net start mysql</h5><p><img src="http://ww1.sinaimg.cn/large/005LZfaWgy1fd0pinuhdbj30in03ujrh" alt="image"><br><img src="http://ww1.sinaimg.cn/large/005LZfaWgy1fd0pinn8a1j30qi08xaa9" alt="image"></p>
<p>输入mysqld -console 输出分析mysql 下没有data文件夹</p>
<h5 id="5、输入-mysqld-–inititailize-insecure"><a href="#5、输入-mysqld-–inititailize-insecure" class="headerlink" title="5、输入 mysqld –inititailize -insecure"></a>5、输入 mysqld –inititailize -insecure</h5><p><img src="http://ww1.sinaimg.cn/large/005LZfaWgy1fd0pinqw1oj30it0c474y" alt="image"><br><img src="http://ww1.sinaimg.cn/large/005LZfaWgy1fd0pinx10vj30in03ujrh" alt="image"></p>
<p>有data文件夹之后还是无法启动mysql服务，打开看 chen-PC.err</p>
<p><img src="http://ww1.sinaimg.cn/large/005LZfaWgy1fd0pinslzuj30nv04774m" alt="image"></p>
<p>原因：发现 – inititalize  命令不存在？然后发现  命令敲错了  initialize   多了一个t，而在命令行中没报错，只写在err 里面。</p>
<p>解决：然后重新把 data 文件夹删掉，  命令行输入  mysqld – initialize -insecure</p>
<p><img src="http://ww1.sinaimg.cn/large/005LZfaWgy1fd0pinpg0sj30r403gjr6" alt="image"><br><img src="http://ww1.sinaimg.cn/large/005LZfaWgy1fd0pinsdc6j30qj0383yb" alt="image"><br><img src="http://ww1.sinaimg.cn/large/005LZfaWgy1fd0pinsj25j30qj09dglm" alt="image"></p>
<h4 id="关于编码问题"><a href="#关于编码问题" class="headerlink" title="关于编码问题"></a>关于编码问题</h4><p>1、在mysql 安装目录下的my.ini 文件中 分别添加下面设置 </p>
<p><img src="http://ww1.sinaimg.cn/large/005LZfaWgy1fd0pintlmej30fp04m0sm" alt="image"></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/10/11/spring-transactional/" itemprop="url">
                  Spring @Transactional配置
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-10-11T13:38:47+08:00" content="2016 年 10 月 11 日">
              2016 年 10 月 11 日
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/JavaEE/" itemprop="url" rel="index">
                    <span itemprop="name">JavaEE</span>
                  </a>
                </span>

                
                
                  ， 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/JavaEE/Spring/" itemprop="url" rel="index">
                    <span itemprop="name">Spring</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/10/11/spring-transactional/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/10/11/spring-transactional/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2016/10/11/spring-transactional/" class="leancloud_visitors" data-flag-title="Spring @Transactional配置">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>在service类前加上@Transactional，声明这个service所有方法需要事务管理。每一个业务方法开始时都会打开一个事务。</p>
<p>Spring默认情况下会对运行期例外(RunTimeException)进行事务回滚。这个例外是unchecked<br>如果遇到checked意外就不回滚。<br>如何改变默认规则：</p>
<p>1 让checked例外也回滚：在整个方法前加上<br>@Transactional(rollbackFor=Exception.class)</p>
<p>2 让unchecked例外不回滚：<br>@Transactional(notRollbackFor=RunTimeException.class)</p>
<p>3 不需要事务管理的(只查询的)方法：<br>@Transactional(propagation=Propagation.NOT_SUPPORTED)</p>
<p>注意： 如果异常被try｛｝catch｛｝了，事务就不回滚了，如果想让事务回滚必须再往外抛try｛｝catch｛throw Exception｝。</p>
<p>@Transactional设置：<br>propagation：事务传播性设置，Propagation枚举类型。Spring支持的事务传播属性包括7种：<br>    PROPAGATION_MANDATORY：方法必须在事务中执行，否则抛出异常。<br>    PROPAGATION_NESTED：使方法运行在嵌套事务中，否则和PROPAGATION_REQUIRED一样。<br>    PROPAGATION_NEVER ：当前方法永远不在事务中运行，否则抛出异常。<br>    PROPAGATION_NOT_SUPPORTED：定义为当前事务不支持的方法，在该方法执行期间正在运行的事务会被暂停<br>    PROPAGATION_REQUIRED：当前的方法必须运行在事务中，如果没有事务就新建一个事务。新事务和方法一起开始，随着方法返回或者抛出异常时终止。<br>    PROPAGATION_REQUIRED_NEW ：当前方法必须新建一个事务，如果当前的事务正在运行则暂停。<br>    PROPAGATION_SUPPORTS ：规定当前方法支持当前事务，但是如果没有事务在运行就使用非事务方法执行。<br>isolation：事务隔离性级别设置，Isolation枚举类型<br>    ISOLATION_DEFAULT ：使用数据库默认的隔离级别<br>    ISOLATION_COMMITTED：允许其他事务已经提交的更新（防止脏读取）<br>    ISOLATION_READ_UNCOMMITTED：允许读取其他事务未提交的更新，会导致三个缺陷发生。执行速度最快<br>    ISOLATION_REPEATABLE_READ ：除非事务自身更改了数据，否则事务多次读取的数据相同（防止脏数据，多次重复读取）<br>    ISOLATION_SERIALIZABLE：隔离级别最高，可以防止三个缺陷，但是速度最慢，影响性能。</p>
<p>readOnly：读写性事务，只读性事务，布尔型<br>    对数据库的操作中，查询是使用最频繁的操作，每次执行查询时都要从数据库中重新读取数据，有时多次读取的数据都是相同的，这样的数据操作不仅浪费了系统资源，还影响了系统速度。对访问量大的程序来说，节省这部分资源可以大大提    升系统速度。<br>   将事务声明为只读的，那么数据库可以根据事务的特性优化事务的读取操作</p>
<p>timeout：超时时间，单位秒<br>事务可能因为某种原因很长时间没有反应，这期间可能锁定了数据库表，影响性能。设置超时时间，如果超过该时间，事务自动回滚。</p>
<p>rollbackFor：一组异常类的实例，遇到时必须进行回滚<br>rollbackForClassname：一组异常类的名字，遇到时必须进行回滚<br>noRollbackFor：一组异常类的实例，遇到时必须不回滚<br>noRollbackForClassname：一组异常类的名字，遇到时必须不回滚</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/09/22/svn-rule/" itemprop="url">
                  SVN提交更新的一些准则
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-09-22T23:00:31+08:00" content="2016 年 09 月 22 日">
              2016 年 09 月 22 日
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/开发工具/" itemprop="url" rel="index">
                    <span itemprop="name">开发工具</span>
                  </a>
                </span>

                
                
                  ， 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/开发工具/SVN/" itemprop="url" rel="index">
                    <span itemprop="name">SVN</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/09/22/svn-rule/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/09/22/svn-rule/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2016/09/22/svn-rule/" class="leancloud_visitors" data-flag-title="SVN提交更新的一些准则">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="SVN提交更新的一个准则"><a href="#SVN提交更新的一个准则" class="headerlink" title="SVN提交更新的一个准则"></a>SVN提交更新的一个准则</h3><h4 id="负责而谨慎地提交自己的代码"><a href="#负责而谨慎地提交自己的代码" class="headerlink" title="负责而谨慎地提交自己的代码"></a>负责而谨慎地提交自己的代码</h4><p>SVN更新的原则是要随时更新，随时提交。当完成了一个小功能，能够通过编译并且并且自己测试之后，谨慎地提交。<br>如果提交过程中产生了冲突，则需要同之前的开发人员联系，两个人一起协商解决冲突，解决冲突之后，需要两人一起测试保证解决冲突之后，程序不会影响其他功能。<br>如果提交过程中产生了更新，则也是需要重新编译并且完成自己的一些必要测试，再进行提交。</p>
<h4 id="保持原子性的提交"><a href="#保持原子性的提交" class="headerlink" title="保持原子性的提交"></a>保持原子性的提交</h4><p>每次提交的间歇尽可能地短，以一个小时，两个小时的开发工作为宜。如在更改UI界面的时候，可以每完成一个UI界面的修改或者设计，就提交一次。在开发功能模块的时候，可以每完成一个小细节功能的测试，就提交一次，在修改bug的时候，每修改掉一个bug并且确认修改了这个bug，也就提交一次。我们提倡多提交，也就能多为代码添加上保险。</p>
<h4 id="不要提交自动生成的文件"><a href="#不要提交自动生成的文件" class="headerlink" title="不要提交自动生成的文件"></a>不要提交自动生成的文件</h4><p>Visual Studio在生成过程中会产生很多自动文件，如.suo等配置文件，Debug,Release,Obj等编译文件，以及其他的一些自动生成，同编译代码无关的文件，这些文件在提交的时候不应该签入，如果不小心签入了，需要使用Delete命令从仓库中删除。</p>
<p>不要提交不能通过编译的代码<br>代码在提交之前，首先要确认自己能够在本地编译。如果在代码中使用了第三方类库，要考虑到项目组成员中有些成员可能没有安装相应的第三方类库或者没有放入GAC（针对.Net Framework）中，项目经理在准备项目工作区域的时候，需要考虑到这样的情况，确保开发小组成员在签出代码之后能够在统一的环境中进行编译。</p>
<h4 id="不要提交自己不明白的代码"><a href="#不要提交自己不明白的代码" class="headerlink" title="不要提交自己不明白的代码"></a>不要提交自己不明白的代码</h4><p>代码在提交入SVN之后，你的代码将被项目成员所分享。如果提交了你不明白的代码，你看不懂，别人也看不懂，如果在以后出现了问题将会成为项目质量的隐患。因此在引入任何第三方代码之前，确保你对这个代码有一个很清晰的了解。</p>
<h4 id="提前宣布自己的工作计划"><a href="#提前宣布自己的工作计划" class="headerlink" title="提前宣布自己的工作计划"></a>提前宣布自己的工作计划</h4><p>在自己准备开始进行某项功能的修改之前，先给工作小组的成员谈谈自己的修改计划，让大家都能了解你的思想，了解你即将对软件作出的修改，这样能尽可能的减少在开发过程中可能出现的冲突，提高开发效率。同时你也能够在和成员的交流中发现自己之前设计的不足，完善你的设计。</p>
<h4 id="对提交的信息采用明晰的标注"><a href="#对提交的信息采用明晰的标注" class="headerlink" title="对提交的信息采用明晰的标注"></a>对提交的信息采用明晰的标注</h4><p>+) 表示增加了功能<br>*) 表示对某些功能进行了更改<br>-) 表示删除了文件，或者对某些功能进行了裁剪，删除，屏蔽。<br>b) 表示修正了具体的某个bug</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/22/aliyun-svn/" itemprop="url">
                  阿里云服务器安装svn服务器端
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-08-22T23:07:59+08:00" content="2016 年 08 月 22 日">
              2016 年 08 月 22 日
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/开发工具/" itemprop="url" rel="index">
                    <span itemprop="name">开发工具</span>
                  </a>
                </span>

                
                
                  ， 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/开发工具/SVN/" itemprop="url" rel="index">
                    <span itemprop="name">SVN</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/08/22/aliyun-svn/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/08/22/aliyun-svn/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2016/08/22/aliyun-svn/" class="leancloud_visitors" data-flag-title="阿里云服务器安装svn服务器端">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="1-安装svn服务器端"><a href="#1-安装svn服务器端" class="headerlink" title="1.安装svn服务器端"></a>1.安装svn服务器端</h4><pre><code>yum install subversion      
</code></pre><p>从镜像下载安装svn服务器端<br>中间会提示是否ok，输入y，确认<br>安装成功提示：…..complete！</p>
<p>依次执行如下命令：</p>
<pre><code>cd /usr/local/              //进入目录，准备创建svn目录
mkdir svnRepo                   //创建一个svn目录
chmod -R 777 svnRepo            //修改目录权限为777
svnadmin create /usr/local/svnRepo/first  //创建一个svn版本仓库first(first可以随便起名字)
</code></pre><p>cd first/conf               //进入first版本仓库下的配置文件目录</p>
<h4 id="2-下面要修改这个目录下的三个配置文件"><a href="#2-下面要修改这个目录下的三个配置文件" class="headerlink" title="2.下面要修改这个目录下的三个配置文件"></a>2.下面要修改这个目录下的三个配置文件</h4><p>(1)vi svnserve.conf    //配置版本库信息和用户文件和用户密码文件的路径、版本库路径<br>把</p>
<pre><code># anon-access = read
# auth-access = write
# password-db = passwd
</code></pre><p>//这四行，前面的#号和空格去掉，变成</p>
<pre><code>anon-access = none      //改成none
auth-access = write
password-db = passwd

realm = first           //改成自己的版本库
</code></pre><p>保存退出</p>
<p>(2)vi authz     //文件,创建svn组和组用户的权限</p>
<pre><code>[groups]
first = ddl,shl //创建一个first的组，并制定两个用户ddl和shl
[/]             //制定根目录下的权限
@first = rw     //first组用户权限为读写
* = r           //其他用户只有读权限
</code></pre><p>保存退出</p>
<p>(3) vi passwd   //创建或修改用户密码</p>
<pre><code>[users]
ddl = 123456    //用户名为gep的用户的密码为123456
shl = 123456    //。。。
</code></pre><p>保存退出</p>
<h4 id="3-然后要设置自启动"><a href="#3-然后要设置自启动" class="headerlink" title="3.然后要设置自启动"></a>3.然后要设置自启动</h4><pre><code>vi /etc/rc.local    
</code></pre><p>打开自启动文件<br>文件内容如下</p>
<pre><code>#!/bin/sh
# This script will be executed *after* all the other init scripts.
# You can put your own initialization stuff in here if you don&apos;t
# want to do the full Sys V style init stuff.

touch /var/lock/subsys/local
</code></pre><p>添加下面一行</p>
<pre><code>svnserve -d -r /usr/local/svnRepo/first
</code></pre><p>保存退出</p>
<pre><code>ps aux |grep &apos;svn&apos;  查找所有svn启动的进程
</code></pre><p>杀死 然后启动svn</p>
<pre><code>svnserve -d -r /usr/local/svnRepo/first 启动svn(可以把这个放到/etc/local/rc.local文件中，实现开机自启动)
</code></pre><h4 id="4-限制不同的用户对不同的版本库操作权限，修改版本库中的conf目录下的-authz文件"><a href="#4-限制不同的用户对不同的版本库操作权限，修改版本库中的conf目录下的-authz文件" class="headerlink" title="4.限制不同的用户对不同的版本库操作权限，修改版本库中的conf目录下的 authz文件"></a>4.限制不同的用户对不同的版本库操作权限，修改版本库中的conf目录下的 authz文件</h4><p>以配置 first 版本库为例</p>
<pre><code>vi authz

[groups]
company = user1,user2
[first:/]             //指定版本库跟目录下的权限
@company = rw     //company组用户权限为读写
* = r           //其他用户只有读权限
</code></pre><p>保存退出</p>
<p>vi passwd 设置组中用户的账号和密码</p>
<pre><code>[users]
user1  = 123456
user2 = 123456
</code></pre><h4 id="5-客户端访问"><a href="#5-客户端访问" class="headerlink" title="5.客户端访问"></a>5.客户端访问</h4><p>假设客户端使用tortoiseSVN<br>打开资源库浏览器输入地址, svn://你的svn服务器ip:3690<br>输入用户名ddl 密码12345<br>因为没有网资源库里放文件所以需要你用客户端右键【create forder】，然后【add forder】</p>
<h4 id="6-SVN版本库起动方式，现在svnRepo下面有-first、test-两个版本库"><a href="#6-SVN版本库起动方式，现在svnRepo下面有-first、test-两个版本库" class="headerlink" title="6.SVN版本库起动方式，现在svnRepo下面有 first、test 两个版本库"></a>6.SVN版本库起动方式，现在svnRepo下面有 first、test 两个版本库</h4><p>1：单版本库起动 </p>
<pre><code>svnserve -d -r /usr/local/svnRepo/first
</code></pre><p>2：多版本库起动</p>
<pre><code>svnserve -d -r /usr/local/svnRepo
</code></pre><p>区别在于起动svn时候的命令中的启动参数-r指定的目录。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/02/17/scrapy-five-module/" itemprop="url">
                  Scrapy五大组件介绍
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-02-17T18:27:11+08:00" content="2016 年 02 月 17 日">
              2016 年 02 月 17 日
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/爬虫/" itemprop="url" rel="index">
                    <span itemprop="name">爬虫</span>
                  </a>
                </span>

                
                
                  ， 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/爬虫/Scrapy/" itemprop="url" rel="index">
                    <span itemprop="name">Scrapy</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/02/17/scrapy-five-module/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/02/17/scrapy-five-module/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2016/02/17/scrapy-five-module/" class="leancloud_visitors" data-flag-title="Scrapy五大组件介绍">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Scrapy框架主要由五大组件组成，它们分别是调度器(Scheduler)、下载器(Downloader)、爬虫（Spider）和实体管道(Item Pipeline)、Scrapy引擎(Scrapy Engine)。下面我们分别介绍各个组件的作用。</p>
<h3 id="调度器"><a href="#调度器" class="headerlink" title="调度器"></a>调度器</h3><p>调度器，说白了可以想像成一个URL（抓取网页的网址或者说是链接）的优先队列，由它来决定下一个要抓取的网址是什么，同时去除重复的网址（不做无用功）。用户可以跟据自己的需求定制调度器。</p>
<h3 id="下载器"><a href="#下载器" class="headerlink" title="下载器"></a>下载器</h3><p>下载器，是所有组件中负担最大的，它用于高速地下载网络上的资源。Scrapy的下载器代码不会太复杂，但效率高，主要的原因是Scrapy下载器是建立在twisted这个高效的异步模型上的(其实整个框架都在建立在这个模型上的)。</p>
<h3 id="爬虫"><a href="#爬虫" class="headerlink" title="爬虫"></a>爬虫</h3><p>爬虫，是用户最关心的部份。用户定制自己的爬虫，用于从特定的网页中提取自己需要的信息，即所谓的实体(Item)。用户也可以从中提取出链接,让Scrapy继续抓取下一个页面。</p>
<h3 id="实体管道"><a href="#实体管道" class="headerlink" title="实体管道"></a>实体管道</h3><p>实体管道，用于处理爬虫提取的实体。主要的功能是持久化实体、验证实体的有效性、清除不需要的信息。</p>
<h3 id="Scrapy引擎"><a href="#Scrapy引擎" class="headerlink" title="Scrapy引擎"></a>Scrapy引擎</h3><p>Scrapy引擎是整个框架的核心。它用来控制调试器、下载器、爬虫。实际上，引擎相当于计算机的CPU,它控制着整个流程。</p>
<h2 id="Scrapy运行流程"><a href="#Scrapy运行流程" class="headerlink" title="Scrapy运行流程"></a>Scrapy运行流程</h2><p><img src="http://ww1.sinaimg.cn/large/005LZfaWgy1fcyi9y62cxj30jg0dqmzl" alt=""></p>
<ol>
<li>首先，引擎从调度器中取出一个链接(URL)用于接下来的抓取</li>
<li>引擎把URL封装成一个请求(Request)传给下载器，下载器把资源下载下来，并封装成应答包(Response)</li>
<li>然后，爬虫解析Response</li>
<li>若是解析出实体（Item）,则交给实体管道进行进一步的处理。</li>
<li>若是解析出的是链接（URL）,则把URL交给Scheduler等待抓取</li>
</ol>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/09/07/linux-mysql-error/" itemprop="url">
                  Starting MySQL. ERROR
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-09-07T22:51:26+08:00" content="2015 年 09 月 07 日">
              2015 年 09 月 07 日
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/09/07/linux-mysql-error/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/09/07/linux-mysql-error/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2015/09/07/linux-mysql-error/" class="leancloud_visitors" data-flag-title="Starting MySQL. ERROR">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="Starting-MySQL-ERROR-The-server-quit-without-updating-PID-file-var-lib-mysql-iZ94mck3376Z-pid"><a href="#Starting-MySQL-ERROR-The-server-quit-without-updating-PID-file-var-lib-mysql-iZ94mck3376Z-pid" class="headerlink" title="Starting MySQL. ERROR! The server quit without updating PID file (/var/lib/mysql/iZ94mck3376Z.pid)."></a>Starting MySQL. ERROR! The server quit without updating PID file (/var/lib/mysql/iZ94mck3376Z.pid).</h3><pre><code>[root@snsgou mysql]# service mysql restart
MySQL server PID file could not be found![失败]
Starting MySQL...The server quit without updating PID file (/usr/local/mysql/data/snsgou.pid).[失败]
</code></pre><p>Google了下 ，问题可能的原因有多种，具体什么原因最好的办法是先查看下错误日志：</p>
<h4 id="1、可能是-usr-local-mysql-data-mysql-pid文件没有写的权限"><a href="#1、可能是-usr-local-mysql-data-mysql-pid文件没有写的权限" class="headerlink" title="1、可能是/usr/local/mysql/data/mysql.pid文件没有写的权限"></a>1、可能是/usr/local/mysql/data/mysql.pid文件没有写的权限</h4><p>解决方法 ：给予权限，执行 “chown -R mysql:mysql /var/data” “chmod -R 755 /usr/local/mysql/data”  然后重新启动mysqld！</p>
<h4 id="2、可能进程里已经存在mysql进程"><a href="#2、可能进程里已经存在mysql进程" class="headerlink" title="2、可能进程里已经存在mysql进程"></a>2、可能进程里已经存在mysql进程</h4><p>解决方法：用命令“ps -ef|grep mysqld”查看是否有mysqld进程，如果有使用“kill -9  进程号”杀死，然后重新启动mysqld！</p>
<h4 id="3、可能是第二次在机器上安装mysql，有残余数据影响了服务的启动。"><a href="#3、可能是第二次在机器上安装mysql，有残余数据影响了服务的启动。" class="headerlink" title="3、可能是第二次在机器上安装mysql，有残余数据影响了服务的启动。"></a>3、可能是第二次在机器上安装mysql，有残余数据影响了服务的启动。</h4><p>解决方法：去mysql的数据目录/data看看，如果存在mysql-bin.index，就赶快把它删除掉吧，它就是罪魁祸首了。本人就是使用第三条方法解决的 ！</p>
<h4 id="4、mysql在启动时没有指定配置文件时会使用-etc-my-cnf配置文件，请打开这个文件查看在-mysqld-节下有没有指定数据目录-datadir-。"><a href="#4、mysql在启动时没有指定配置文件时会使用-etc-my-cnf配置文件，请打开这个文件查看在-mysqld-节下有没有指定数据目录-datadir-。" class="headerlink" title="4、mysql在启动时没有指定配置文件时会使用/etc/my.cnf配置文件，请打开这个文件查看在[mysqld]节下有没有指定数据目录(datadir)。"></a>4、mysql在启动时没有指定配置文件时会使用/etc/my.cnf配置文件，请打开这个文件查看在[mysqld]节下有没有指定数据目录(datadir)。</h4><p>解决方法：请在[mysqld]下设置这一行：datadir = /usr/local/mysql/data</p>
<h4 id="5、skip-federated字段问题"><a href="#5、skip-federated字段问题" class="headerlink" title="5、skip-federated字段问题"></a>5、skip-federated字段问题</h4><p>解决方法：检查一下/etc/my.cnf文件中有没有没被注释掉的skip-federated字段，如果有就立即注释掉吧。</p>
<h4 id="6、错误日志目录不存在"><a href="#6、错误日志目录不存在" class="headerlink" title="6、错误日志目录不存在"></a>6、错误日志目录不存在</h4><p>解决方法：使用“chown” “chmod”命令赋予mysql所有者及权限</p>
<h4 id="7、selinux惹的祸，如果是centos系统，默认会开启selinux"><a href="#7、selinux惹的祸，如果是centos系统，默认会开启selinux" class="headerlink" title="7、selinux惹的祸，如果是centos系统，默认会开启selinux"></a>7、selinux惹的祸，如果是centos系统，默认会开启selinux</h4><p>解决方法：关闭它，打开/etc/selinux/config，把SELINUX=enforcing改为SELINUX=disabled后存盘退出重启机器试试。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/09/04/hibernate-language/" itemprop="url">
                  Hibernate查询语言
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-09-04T10:12:26+08:00" content="2015 年 09 月 04 日">
              2015 年 09 月 04 日
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/JavaEE/" itemprop="url" rel="index">
                    <span itemprop="name">JavaEE</span>
                  </a>
                </span>

                
                
                  ， 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/JavaEE/Hibernate/" itemprop="url" rel="index">
                    <span itemprop="name">Hibernate</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/09/04/hibernate-language/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/09/04/hibernate-language/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2015/09/04/hibernate-language/" class="leancloud_visitors" data-flag-title="Hibernate查询语言">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="HQL-Hibernate查询语言"><a href="#HQL-Hibernate查询语言" class="headerlink" title="HQL: Hibernate查询语言"></a>HQL: Hibernate查询语言</h2><p>Hibernate配备了一种非常强大的查询语言，这种语言看上去很像SQL。但是不要被语法结构 上的相似所迷惑，HQL是非常有意识的被设计为完全面向对象的查询，它可以理解如继承、多态 和关联之类的概念。</p>
<p>Hibernate配备了一种非常强大的查询语言，这种语言看上去很像SQL。但是不要被语法结构 上的相似所迷惑，HQL是非常有意识的被设计为完全面向对象的查询，它可以理解如继承、多态 和关联之类的概念。</p>
<h3 id="1-大小写敏感性问题"><a href="#1-大小写敏感性问题" class="headerlink" title="1. 大小写敏感性问题"></a>1. 大小写敏感性问题</h3><p>除了Java类与属性的名称外，查询语句对大小写并不敏感。 所以 SeLeCT 与 sELEct 以及 SELECT 是相同的，但是 org.hibernate.eg.FOO 并不等价于org.hibernate.eg.Foo 并且 foo.barSet 也不等价于 foo.BARSET。<br>本手册中的HQL关键字将使用小写字母. 很多用户发现使用完全大写的关键字会使查询语句 的可读性更强, 但我们发现，当把查询语句嵌入到Java语句中的时候使用大写关键字比较难看。</p>
<h3 id="2-from子句"><a href="#2-from子句" class="headerlink" title="2. from子句"></a>2. from子句</h3><p>Hibernate中最简单的查询语句的形式如下：</p>
<pre><code>from eg.Cat
</code></pre><p>该子句简单的返回eg.Cat类的所有实例。 通常我们不需要使用类的全限定名, 因为 auto-import（自动引入） 是缺省的情况。 所以我们几乎只使用如下的简单写法：</p>
<pre><code>from Cat
</code></pre><p>大多数情况下, 你需要指定一个别名, 原因是你可能需要 在查询语句的其它部分引用到Cat</p>
<pre><code>from Cat as cat
</code></pre><p>这个语句把别名cat指定给类Cat 的实例, 这样我们就可以在随后的查询中使用此别名了。 关键字as 是可选的，我们也可以这样写:</p>
<pre><code>from Cat cat
</code></pre><p>子句中可以同时出现多个类, 其查询结果是产生一个笛卡儿积或产生跨表的连接。</p>
<pre><code>from Formula, Parameter
from Formula as form, Parameter as param
</code></pre><p>查询语句中别名的开头部分小写被认为是实践中的好习惯， 这样做与Java变量的命名标准保持了一致 (比如，domesticCat)。</p>
<h3 id="3-关联-Association-与连接-Join"><a href="#3-关联-Association-与连接-Join" class="headerlink" title="3. 关联(Association)与连接(Join)"></a>3. 关联(Association)与连接(Join)</h3><p>我们也可以为相关联的实体甚至是对一个集合中的全部元素指定一个别名, 这时要使用关键字join。</p>
<pre><code>from Cat as cat 
    inner join cat.mate as mate
    left outer join cat.kittens as kitten

from Cat as cat left join cat.mate.kittens as kittens
from Formula form full join form.parameter param
</code></pre><p>受支持的连接类型是从ANSI SQL中借鉴来的。</p>
<ul>
<li>inner join（内连接）</li>
<li>left outer join（左外连接）</li>
<li>right outer join（右外连接）</li>
<li>full join (全连接，并不常用)</li>
</ul>
<p>语句inner join, left outer join 以及 right outer join 可以简写。</p>
<pre><code>from Cat as cat 
    join cat.mate as mate
    left join cat.kittens as kitten
</code></pre><p>还有，一个”fetch”连接允许仅仅使用一个选择语句就将相关联的对象或一组值的集合随着他们的父对象的初始化而被初始化，这种方法在使用到集合的情况下尤其有用，对于关联和集合来说，它有效的代替了映射文件中的外联接 与延迟声明（lazy declarations）. </p>
<pre><code>from Cat as cat 
    inner join fetch cat.mate
    left join fetch cat.kittens
</code></pre><p>一个fetch连接通常不需要被指定别名, 因为相关联的对象不应当被用在 where 子句 (或其它任何子句)中。同时，相关联的对象并不在查询的结果中直接返回，但可以通过他们的父对象来访问到他们。</p>
<p>注意fetch构造变量在使用了scroll() 或 iterate()函数的查询中是不能使用的。最后注意，使用full join fetch 与 right join fetch是没有意义的。</p>
<p>如果你使用属性级别的延迟获取（lazy fetching）（这是通过重新编写字节码实现的），可以使用 fetch all properties 来强制Hibernate立即取得那些原本需要延迟加载的属性（在第一个查询中）。</p>
<pre><code>from Document fetch all properties order by name
from Document doc fetch all properties where lower(doc.name) like &apos;%cats%&apos;
</code></pre><h3 id="4-select子句"><a href="#4-select子句" class="headerlink" title="4. select子句"></a>4. select子句</h3><p>select 子句选择将哪些对象与属性返 回到查询结果集中. 考虑如下情况:</p>
<pre><code>select mate 
from Cat as cat 
    inner join cat.mate as mate
</code></pre><p>该语句将选择mates of other Cats。（其他猫的配偶） 实际上, 你可以更简洁的用以下的查询语句表达相同的含义:</p>
<pre><code>select cat.mate from Cat cat
</code></pre><p>查询语句可以返回值为任何类型的属性，包括返回类型为某种组件(Component)的属性:</p>
<pre><code>select cat.name from DomesticCat cat
where cat.name like &apos;fri%&apos;
select cust.name.firstName from Customer as cust
</code></pre><p>查询语句可以返回多个对象和（或）属性，存放在 Object[]队列中,</p>
<pre><code>select mother, offspr, mate.name 
from DomesticCat as mother
    inner join mother.mate as mate
    left outer join mother.kittens as offspr
</code></pre><p>或存放在一个List对象中,</p>
<pre><code>select new list(mother, offspr, mate.name)
from DomesticCat as mother
    inner join mother.mate as mate
    left outer join mother.kittens as offspr
</code></pre><p>也可能直接返回一个实际的类型安全的Java对象,</p>
<pre><code>select new Family(mother, mate, offspr)
from DomesticCat as mother
    join mother.mate as mate
    left join mother.kittens as offspr
</code></pre><p>假设类Family有一个合适的构造函数.<br>你可以使用关键字as给“被选择了的表达式”指派别名:</p>
<pre><code>select max(bodyWeight) as max, min(bodyWeight) as min, count(*) as n
from Cat cat
</code></pre><p>这种做法在与子句select new map一起使用时最有用:</p>
<pre><code>select new map( max(bodyWeight) as max, min(bodyWeight) as min, count(*) as n )
from Cat cat
</code></pre><p>该查询返回了一个Map的对象，内容是别名与被选择的值组成的名-值映射。</p>
<h3 id="5-聚集函数"><a href="#5-聚集函数" class="headerlink" title="5. 聚集函数"></a>5. 聚集函数</h3><p>HQL查询甚至可以返回作用于属性之上的聚集函数的计算结果:</p>
<pre><code>select avg(cat.weight), sum(cat.weight), max(cat.weight), count(cat)
from Cat cat
</code></pre><p>受支持的聚集函数如下：<br>avg(…), sum(…), min(…), max(…)<br>count(*)<br>count(…), count(distinct …), count(all…)</p>
<p>你可以在选择子句中使用数学操作符、连接以及经过验证的SQL函数：</p>
<pre><code>select cat.weight + sum(kitten.weight) 
from Cat cat 
    join cat.kittens kitten
group by cat.id, cat.weight
select firstName||&apos; &apos;||initial||&apos; &apos;||upper(lastName) from Person
</code></pre><p>关键字distinct与all 也可以使用，它们具有与SQL相同的语义.</p>
<pre><code>select distinct cat.name from Cat cat

select count(distinct cat.name), count(cat) from Cat cat
</code></pre><h3 id="6-多态查询"><a href="#6-多态查询" class="headerlink" title="6. 多态查询"></a>6. 多态查询</h3><p>一个如下的查询语句:</p>
<pre><code>from Cat as cat
</code></pre><p>不仅返回Cat类的实例, 也同时返回子类 DomesticCat的实例. Hibernate 可以在from子句中指定任何 Java 类或接口. 查询会返回继承了该类的所有持久化子类 的实例或返回声明了该接口的所有持久化类的实例。下面的查询语句返回所有的被持久化的对象：</p>
<pre><code>from java.lang.Object o
</code></pre><p>接口Named 可能被各种各样的持久化类声明：</p>
<pre><code>from Named n, Named m where n.name = m.name
</code></pre><p>注意，最后的两个查询将需要超过一个的SQL SELECT.这表明order by子句 没有对整个结果集进行正确的排序. (这也说明你不能对这样的查询使用Query.scroll()方法.)</p>
<h3 id="7-where子句"><a href="#7-where子句" class="headerlink" title="7. where子句"></a>7. where子句</h3><p>where子句允许你将返回的实例列表的范围缩小. 如果没有指定别名，你可以使用属性名来直接引用属性:</p>
<pre><code>from Cat where name=&apos;Fritz&apos;
</code></pre><p>如果指派了别名，需要使用完整的属性名:</p>
<pre><code>from Cat as cat where cat.name=&apos;Fritz&apos;
</code></pre><p>返回名为（属性name等于）’Fritz’的Cat类的实例。</p>
<pre><code>select foo 
from Foo foo, Bar bar
where foo.startDate = bar.date
</code></pre><p>将返回所有满足下面条件的Foo类的实例： 存在如下的bar的一个实例，其date属性等于 Foo的startDate属性。 复合路径表达式使得where子句非常的强大，考虑如下情况：</p>
<pre><code>from Cat cat where cat.mate.name is not null
</code></pre><p>该查询将被翻译成为一个含有表连接（内连接）的SQL查询。如果你打算写像这样的查询语句</p>
<pre><code>from Foo foo  
where foo.bar.baz.customer.address.city is not null
</code></pre><p>在SQL中，你为达此目的将需要进行一个四表连接的查询。<br>=运算符不仅可以被用来比较属性的值，也可以用来比较实例：</p>
<pre><code>from Cat cat, Cat rival where cat.mate = rival.mate
select cat, mate 
from Cat cat, Cat mate
where cat.mate = mate
</code></pre><p>特殊属性（小写）id可以用来表示一个对象的唯一的标识符。（你也可以使用该对象的属性名。）</p>
<pre><code>from Cat as cat where cat.id = 123

from Cat as cat where cat.mate.id = 69
</code></pre><p>第二个查询是有效的。此时不需要进行表连接！<br>同样也可以使用复合标识符。比如Person类有一个复合标识符，它由country属性 与medicareNumber属性组成。</p>
<pre><code>from bank.Person person
where person.id.country = &apos;AU&apos; 
    and person.id.medicareNumber = 123456
from bank.Account account
where account.owner.id.country = &apos;AU&apos; 
    and account.owner.id.medicareNumber = 123456
</code></pre><p>第二个查询也不需要进行表连接。<br>同样的，特殊属性class在进行多态持久化的情况下被用来存取一个实例的鉴别值（discriminator value）。 一个嵌入到where子句中的Java类的名字将被转换为该类的鉴别值。</p>
<pre><code>from Cat cat where cat.class = DomesticCat
</code></pre><p>你也可以声明一个属性的类型是组件或者复合用户类型（以及由组件构成的组件等等）。永远不要尝试使用以组件类型来结尾的路径表达式（path-expression） （与此相反，你应当使用组件的一个属性来结尾）。 </p>
<p>举例来说，如果store.owner含有一个包含了组件的实体address<br>store.owner.address.city    // 正确<br>store.owner.address         // 错误!<br>一个“任意”类型有两个特殊的属性id和class, 来允许我们按照下面的方式表达一个连接（AuditLog.item 是一个属性，该属性被映射为<any>）。</any></p>
<pre><code>from AuditLog log, Payment payment 
where log.item.class = &apos;Payment&apos; and log.item.id = payment.id
</code></pre><p>注意，在上面的查询与句中，log.item.class 和 payment.class 将涉及到完全不同的数据库中的列。</p>
<h3 id="8-表达式"><a href="#8-表达式" class="headerlink" title="8. 表达式"></a>8. 表达式</h3><p>在where子句中允许使用的表达式包括 大多数你可以在SQL使用的表达式种类:</p>
<p>数学运算符+, -, *, /<br>二进制比较运算符=, &gt;=, &lt;=, &lt;&gt;, !=, like<br>逻辑运算符and, or, not<br>in, not in, between, is null, is not null, is empty, is not empty, member of and not member of<br>“简单的” case, case … when … then … else … end,和 “搜索” case, case when … then … else … end<br>字符串连接符…||… or concat(…,…)<br>current_date(), current_time(), current_timestamp()<br>second(…), minute(…), hour(…), day(…), month(…), year(…),<br>EJB-QL 3.0定义的任何函数或操作：substring(), trim(), lower(), upper(), length(), locate(), abs(), sqrt(), bit_length()<br>coalesce() 和 nullif()<br>cast(… as …), 其第二个参数是某Hibernate类型的名字，以及extract(… from …)，只要ANSI cast() 和 extract() 被底层数据库支持<br>任何数据库支持的SQL标量函数，比如sign(), trunc(), rtrim(), sin()</p>
<p>JDBC参数传入 ?<br>命名参数:name, :start_date, :x1<br>SQL 直接常量 ‘foo’, 69, ‘1970-01-01 10:00:01.0’<br>Java public static final 类型的常量 eg.Color.TABBY</p>
<p>关键字in与between可按如下方法使用:</p>
<pre><code>from DomesticCat cat where cat.name between &apos;A&apos; and &apos;B&apos;
from DomesticCat cat where cat.name in ( &apos;Foo&apos;, &apos;Bar&apos;, &apos;Baz&apos; )
</code></pre><p>而且否定的格式也可以如下书写：</p>
<pre><code>from DomesticCat cat where cat.name not between &apos;A&apos; and &apos;B&apos;
from DomesticCat cat where cat.name not in ( &apos;Foo&apos;, &apos;Bar&apos;, &apos;Baz&apos; )
</code></pre><p>同样, 子句is null与is not null可以被用来测试空值(null).<br>在Hibernate配置文件中声明HQL“查询替代（query substitutions）”之后， 布尔表达式（Booleans）可以在其他表达式中轻松的使用:</p>
<pre><code>&lt;property name=&quot;hibernate.query.substitutions&quot;&gt;true 1, false 0&lt;/property&gt;
</code></pre><p>系统将该HQL转换为SQL语句时，该设置表明将用字符 1 和 0 来 取代关键字true 和 </p>
<pre><code>false:
from Cat cat where cat.alive = true
</code></pre><p>你可以用特殊属性size, 或是特殊函数size()测试一个集合的大小。</p>
<pre><code>from Cat cat where cat.kittens.size &gt; 0
from Cat cat where size(cat.kittens) &gt; 0
</code></pre><p>对于索引了（有序）的集合，你可以使用minindex 与 maxindex函数来引用到最小与最大的索引序数。 同理，你可以使用minelement 与 maxelement函数来 引用到一个基本数据类型的集合中最小与最大的元素。</p>
<pre><code>from Calendar cal where maxelement(cal.holidays) &gt; current date
from Order order where maxindex(order.items) &gt; 100
from Order order where minelement(order.items) &gt; 10000
</code></pre><p>在传递一个集合的索引集或者是元素集(elements与indices 函数) 或者传递一个子查询的结果的时候，可以使用SQL函数any, some, all, exists, in</p>
<pre><code>select mother from Cat as mother, Cat as kit
where kit in elements(foo.kittens)
select p from NameList list, Person p
where p.name = some elements(list.names)
from Cat cat where exists elements(cat.kittens)
from Player p where 3 &gt; all elements(p.scores)
from Show show where &apos;fizard&apos; in indices(show.acts)
</code></pre><p>注意，在Hibernate3种，这些结构变量- size, elements, indices, minindex, maxindex, minelement, maxelement - 只能在where子句中使用。<br>一个被索引过的（有序的）集合的元素(arrays, lists, maps)可以在其他索引中被引用（只能在where子句中）：</p>
<pre><code>from Order order where order.items[0].id = 1234
select person from Person person, Calendar calendar
where calendar.holidays[&apos;national day&apos;] = person.birthDay
    and person.nationality.calendar = calendar
select item from Item item, Order order
where order.items[ order.deliveredItemIndices[0] ] = item and order.id = 11
select item from Item item, Order order
where order.items[ maxindex(order.items) ] = item and order.id = 11
</code></pre><p>在[]中的表达式甚至可以是一个算数表达式。</p>
<pre><code>select item from Item item, Order order
where order.items[ size(order.items) - 1 ] = item
</code></pre><p>对于一个一对多的关联（one-to-many association）或是值的集合中的元素， HQL也提供内建的index()函数，</p>
<pre><code>select item, index(item) from Order order 
    join order.items item
where index(item) &lt; 5
</code></pre><p>如果底层数据库支持标量的SQL函数，它们也可以被使用</p>
<pre><code>from DomesticCat cat where upper(cat.name) like &apos;FRI%&apos;
</code></pre><p>如果你还不能对所有的这些深信不疑，想想下面的查询。如果使用SQL，语句长度会增长多少，可读性会下降多少：</p>
<pre><code>select cust
from Product prod,
    Store store
    inner join store.customers cust
where prod.name = &apos;widget&apos;
    and store.location.name in ( &apos;Melbourne&apos;, &apos;Sydney&apos; )
    and prod = all elements(cust.currentOrder.lineItems)
</code></pre><p>提示: 会像如下的语句</p>
<pre><code>SELECT cust.name, cust.address, cust.phone, cust.id, cust.current_order
FROM customers cust,
    stores store,
    locations loc,
    store_customers sc,
    product prod
WHERE prod.name = &apos;widget&apos;
    AND store.loc_id = loc.id
    AND loc.name IN ( &apos;Melbourne&apos;, &apos;Sydney&apos; )
    AND sc.store_id = store.id
    AND sc.cust_id = cust.id
    AND prod.id = ALL(
        SELECT item.prod_id
        FROM line_items item, orders o
        WHERE item.order_id = o.id
            AND cust.current_order = o.id
    )
</code></pre><h3 id="9-order-by子句"><a href="#9-order-by子句" class="headerlink" title="9. order by子句"></a>9. order by子句</h3><p>查询返回的列表(list)可以按照一个返回的类或组件（components)中的任何属性（property）进行排序：</p>
<pre><code>from DomesticCat cat
order by cat.name asc, cat.weight desc, cat.birthdate
</code></pre><p>可选的asc或desc关键字指明了按照升序或降序进行排序.</p>
<h3 id="10-group-by子句"><a href="#10-group-by子句" class="headerlink" title="10. group by子句"></a>10. group by子句</h3><p>一个返回聚集值(aggregate values)的查询可以按照一个返回的类或组件（components)中的任何属性（property）进行分组：</p>
<pre><code>select cat.color, sum(cat.weight), count(cat) 
from Cat cat
group by cat.color
select foo.id, avg(name), max(name) 
from Foo foo join foo.names name
group by foo.id
</code></pre><p>having子句在这里也允许使用.</p>
<pre><code>select cat.color, sum(cat.weight), count(cat) 
from Cat cat
group by cat.color 
having cat.color in (eg.Color.TABBY, eg.Color.BLACK)
</code></pre><p>如果底层的数据库支持的话(例如不能在MySQL中使用)，SQL的一般函数与聚集函数也可以出现 在having与order by 子句中。</p>
<pre><code>select cat
from Cat cat
    join cat.kittens kitten
group by cat
having avg(kitten.weight) &gt; 100
order by count(kitten) asc, sum(kitten.weight) desc
</code></pre><p>注意group by子句与 order by子句中都不能包含算术表达式（arithmetic expressions）.</p>
<h3 id="11-子查询"><a href="#11-子查询" class="headerlink" title="11. 子查询"></a>11. 子查询</h3><p>对于支持子查询的数据库，Hibernate支持在查询中使用子查询。一个子查询必须被圆括号包围起来（经常是SQL聚集函数的圆括号）。 甚至相互关联的子查询（引用到外部查询中的别名的子查询）也是允许的。</p>
<pre><code>from Cat as fatcat 
where fatcat.weight &gt; ( 
    select avg(cat.weight) from DomesticCat cat 
)
from DomesticCat as cat 
where cat.name = some ( 
    select name.nickName from Name as name 
)
from Cat as cat 
where not exists ( 
    from Cat as mate where mate.mate = cat 
)
from DomesticCat as cat 
where cat.name not in ( 
    select name.nickName from Name as name 
)
</code></pre><p>在select列表中包含一个表达式以上的子查询，你可以使用一个元组构造符（tuple constructors）：</p>
<pre><code>from Cat as cat 
where not ( cat.name, cat.color ) in ( 
    select cat.name, cat.color from DomesticCat cat 
)
</code></pre><p>注意在某些数据库中（不包括Oracle与HSQL），你也可以在其他语境中使用元组构造符， 比如查询用户类型的组件与组合：</p>
<pre><code>from Person where name = (&apos;Gavin&apos;, &apos;A&apos;, &apos;King&apos;)
</code></pre><p>该查询等价于更复杂的：</p>
<pre><code>from Person where name.first = &apos;Gavin&apos; and name.initial = &apos;A&apos; and name.last = &apos;King&apos;)
</code></pre><p>有两个很好的理由使你不应当作这样的事情：首先，它不完全适用于各个数据库平台；其次，查询现在依赖于映射文件中属性的顺序。</p>
<h3 id="12-HQL示例"><a href="#12-HQL示例" class="headerlink" title="12. HQL示例"></a>12. HQL示例</h3><p>Hibernate查询可以非常的强大与复杂。实际上，Hibernate的一个主要卖点就是查询语句的威力。这里有一些例子，它们与我在最近的 一个项目中使用的查询非常相似。注意你能用到的大多数查询比这些要简单的多！<br>下面的查询对于某个特定的客户的所有未支付的账单，在给定给最小总价值的情况下，返回订单的id，条目的数量和总价值， 返回值按照总价值的结果进行排序。为了决定价格，查询使用了当前目录。作为转换结果的SQL查询，使用了ORDER, ORDER_LINE, PRODUCT, CATALOG 和PRICE 库表。</p>
<pre><code>select order.id, sum(price.amount), count(item)
from Order as order
    join order.lineItems as item
    join item.product as product,
    Catalog as catalog
    join catalog.prices as price
where order.paid = false
    and order.customer = :customer
    and price.product = product
    and catalog.effectiveDate &lt; sysdate
    and catalog.effectiveDate &gt;= all (
        select cat.effectiveDate 
        from Catalog as cat
        where cat.effectiveDate &lt; sysdate
    )
group by order
having sum(price.amount) &gt; :minAmount
order by sum(price.amount) desc
</code></pre><p>这简直是一个怪物！实际上，在现实生活中，我并不热衷于子查询，所以我的查询语句看起来更像这个：</p>
<pre><code>select order.id, sum(price.amount), count(item)
from Order as order
    join order.lineItems as item
    join item.product as product,
    Catalog as catalog
    join catalog.prices as price
where order.paid = false
    and order.customer = :customer
    and price.product = product
    and catalog = :currentCatalog
group by order
having sum(price.amount) &gt; :minAmount
order by sum(price.amount) desc
</code></pre><p>下面一个查询计算每一种状态下的支付的数目，除去所有处于AWAITING_APPROVAL状态的支付，因为在该状态下 当前的用户作出了状态的最新改变。该查询被转换成含有两个内连接以及一个相关联的子选择的SQL查询，该查询使用了表 PAYMENT, PAYMENT_STATUS 以及 PAYMENT_STATUS_CHANGE。</p>
<pre><code>select count(payment), status.name 
from Payment as payment 
    join payment.currentStatus as status
    join payment.statusChanges as statusChange
where payment.status.name &lt;&gt; PaymentStatus.AWAITING_APPROVAL
    or (
        statusChange.timeStamp = ( 
            select max(change.timeStamp) 
            from PaymentStatusChange change 
            where change.payment = payment
        )
        and statusChange.user &lt;&gt; :currentUser
    )
group by status.name, status.sortOrder
order by status.sortOrder
</code></pre><p>如果我把statusChanges实例集映射为一个列表（list）而不是一个集合（set）, 书写查询语句将更加简单.</p>
<pre><code>select count(payment), status.name 
from Payment as payment
    join payment.currentStatus as status
where payment.status.name &lt;&gt; PaymentStatus.AWAITING_APPROVAL
    or payment.statusChanges[ maxIndex(payment.statusChanges) ].user &lt;&gt; :currentUser
group by status.name, status.sortOrder
order by status.sortOrder
</code></pre><p>下面一个查询使用了MS SQL Server的 isNull()函数用以返回当前用户所属组织的组织帐号及组织未支付的账。 它被转换成一个对表ACCOUNT,PAYMENT, PAYMENT_STATUS, ACCOUNT_TYPE, ORGANIZATION 以及 ORG_USER进行的三个内连接， 一个外连接和一个子选择的SQL查询。</p>
<pre><code>select account, payment
from Account as account
    left outer join account.payments as payment
where :currentUser in elements(account.holder.users)
    and PaymentStatus.UNPAID = isNull(payment.currentStatus.name, PaymentStatus.UNPAID)
order by account.type.sortOrder, account.accountNumber, payment.dueDate
</code></pre><p>对于一些数据库，我们需要弃用（相关的）子选择。</p>
<pre><code>select account, payment
from Account as account
    join account.holder.users as user
    left outer join account.payments as payment
where :currentUser = user
    and PaymentStatus.UNPAID = isNull(payment.currentStatus.name, PaymentStatus.UNPAID)
order by account.type.sortOrder, account.accountNumber, payment.dueDate
</code></pre><h3 id="13-批量的UPDATE-amp-DELETE语句"><a href="#13-批量的UPDATE-amp-DELETE语句" class="headerlink" title="13. 批量的UPDATE &amp; DELETE语句"></a>13. 批量的UPDATE &amp; DELETE语句</h3><p>HQL现在支持UPDATE与DELETE语句. 查阅 第 14.3 节 “大批量更新/删除（Bulk update/delete）” 以获得更多信息。</p>
<h3 id="14-小技巧-amp-小窍门"><a href="#14-小技巧-amp-小窍门" class="headerlink" title="14. 小技巧 &amp; 小窍门"></a>14. 小技巧 &amp; 小窍门</h3><p>你可以统计查询结果的数目而不必实际的返回他们：<br>( (Integer) session.iterate(“select count(*) from ….”).next() ).intValue()<br>若想根据一个集合的大小来进行排序，可以使用如下的语句：</p>
<pre><code>select usr.id, usr.name
from User as usr 
    left join usr.messages as msg
group by usr.id, usr.name
order by count(msg)
</code></pre><p>如果你的数据库支持子选择，你可以在你的查询的where子句中为选择的大小（selection size）指定一个条件:</p>
<pre><code>from User usr where size(usr.messages) &gt;= 1
</code></pre><p>如果你的数据库不支持子选择语句，使用下面的查询：</p>
<pre><code>select usr.id, usr.name
from User usr.name
    join usr.messages msg
group by usr.id, usr.name
having count(msg) &gt;= 1
</code></pre><p>因为内连接（inner join）的原因，这个解决方案不能返回含有零个信息的User 类的实例, 所以这种情况下使用下面的格式将是有帮助的:</p>
<pre><code>select usr.id, usr.name
from User as usr
    left join usr.messages as msg
group by usr.id, usr.name
having count(msg) = 0
</code></pre><p>JavaBean的属性可以被绑定到一个命名查询（named query）的参数上：</p>
<pre><code>Query q = s.createQuery(&quot;from foo Foo as foo where foo.name=:name and foo.size=:size&quot;);
q.setProperties(fooBean); // fooBean包含方法getName()与getSize()
List foos = q.list();
</code></pre><p>通过将接口Query与一个过滤器（filter）一起使用，集合（Collections）是可以分页的：</p>
<pre><code>Query q = s.createFilter( collection, &quot;&quot; ); // 一个简单的过滤器
q.setMaxResults(PAGE_SIZE);
q.setFirstResult(PAGE_SIZE * pageNumber);
List page = q.list();
</code></pre><p>通过使用查询过滤器（query filter）可以将集合（Collection）的原素分组或排序:</p>
<pre><code>Collection orderedCollection = s.filter( collection, &quot;order by this.amount&quot; );
Collection counts = s.filter( collection, &quot;select this.type, count(this) group by this.type&quot; );
</code></pre><p>不用通过初始化，你就可以知道一个集合（Collection）的大小：</p>
<pre><code>( (Integer) session.iterate(&quot;select count(*) from ....&quot;).next() ).intValue();
</code></pre>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/taylor.png"
               alt="陈世强" />
          <p class="site-author-name" itemprop="name">陈世强</p>
          <p class="site-description motion-element" itemprop="description">你陪着我的时候，我从没有羡慕任何人。</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">15</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">15</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">14</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/chensian" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://blog.csdn.net/chen_shiqiang" target="_blank" title="CSDN">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  CSDN
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://www.zhihu.com/people/chesian" target="_blank" title="知乎">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  知乎
                </a>
              </span>
            
          
        </div>

        
        

        
        
          <div class="links-of-blogroll motion-element links-of-blogroll-inline">
            <div class="links-of-blogroll-title">
              <i class="fa  fa-fw fa-globe"></i>
              Links
            </div>
            <ul class="links-of-blogroll-list">
              
                <li class="links-of-blogroll-item">
                  <a href="http://macshuo.com/" title="MacTalk" target="_blank">MacTalk</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://example.com/" title="Title" target="_blank">Title</a>
                </li>
              
            </ul>
          </div>
        

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2015 - 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">陈世强</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.0.1"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"chesian"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
  





  
  
  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length == 0) {
       search_path = "search.xml";
    }
    var path = "/" + search_path;
    // monitor main search box;

    function proceedsearch() {
      $("body").append('<div class="popoverlay">').css('overflow', 'hidden');
      $('.popup').toggle();

    }
    // search function;
    var searchFunc = function(path, search_id, content_id) {
    'use strict';
    $.ajax({
        url: path,
        dataType: "xml",
        async: true,
        success: function( xmlResponse ) {
            // get the contents from search data
            isfetched = true;
            $('.popup').detach().appendTo('.header-inner');
            var datas = $( "entry", xmlResponse ).map(function() {
                return {
                    title: $( "title", this ).text(),
                    content: $("content",this).text(),
                    url: $( "url" , this).text()
                };
            }).get();
            var $input = document.getElementById(search_id);
            var $resultContent = document.getElementById(content_id);
            $input.addEventListener('input', function(){
                var matchcounts = 0;
                var str='<ul class=\"search-result-list\">';                
                var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                $resultContent.innerHTML = "";
                if (this.value.trim().length > 1) {
                // perform local searching
                datas.forEach(function(data) {
                    var isMatch = true;
                    var content_index = [];
                    var data_title = data.title.trim().toLowerCase();
                    var data_content = data.content.trim().replace(/<[^>]+>/g,"").toLowerCase();
                    var data_url = data.url;
                    var index_title = -1;
                    var index_content = -1;
                    var first_occur = -1;
                    // only match artiles with not empty titles and contents
                    if(data_title != '' && data_content != '') {
                        keywords.forEach(function(keyword, i) {
                            index_title = data_title.indexOf(keyword);
                            index_content = data_content.indexOf(keyword);
                            if( index_title < 0 && index_content < 0 ){
                                isMatch = false;
                            } else {
                                if (index_content < 0) {
                                    index_content = 0;
                                }
                                if (i == 0) {
                                    first_occur = index_content;
                                }
                            }
                        });
                    }
                    // show search results
                    if (isMatch) {
                        matchcounts += 1;
                        str += "<li><a href='"+ data_url +"' class='search-result-title'>"+ data_title +"</a>";
                        var content = data.content.trim().replace(/<[^>]+>/g,"");
                        if (first_occur >= 0) {
                            // cut out 100 characters
                            var start = first_occur - 20;
                            var end = first_occur + 80;
                            if(start < 0){
                                start = 0;
                            }
                            if(start == 0){
                                end = 50;
                            }
                            if(end > content.length){
                                end = content.length;
                            }
                            var match_content = content.substring(start, end);
                            // highlight all keywords
                            keywords.forEach(function(keyword){
                                var regS = new RegExp(keyword, "gi");
                                match_content = match_content.replace(regS, "<b class=\"search-keyword\">"+keyword+"</b>");
                            });
                            
                            str += "<p class=\"search-result\">" + match_content +"...</p>"
                        }
                        str += "</li>";
                    }
                })};
                str += "</ul>";
                if (matchcounts == 0) { str = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>' }
                if (keywords == "") { str = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>' }
                $resultContent.innerHTML = str;
            });
            proceedsearch();
        }
    });}

    // handle and trigger popup window;
    $('.popup-trigger').mousedown(function(e) {
      e.stopPropagation();
      if (isfetched == false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };

    });

    $('.popup-btn-close').click(function(e){
      $('.popup').hide();
      $(".popoverlay").remove();
      $('body').css('overflow', '');
    });
    $('.popup').click(function(e){
      e.stopPropagation();
    });
  </script>

  

  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>
  <script>AV.initialize("Gp631ljrulxxQsO3C8Cf53fk-gzGzoHsz", "Uo1Jv7vhPGFYFrDjc73yHa7P");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

</body>
</html>
